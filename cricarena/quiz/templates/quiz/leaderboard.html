{% extends 'quiz/page.html' %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'quiz/leaderboard.css' %}">

<div class="leaderboard-container">
  <h1 class="leaderboard-title">🏆 Cricarena Leaderboard</h1>
  <div class="table-wrapper">
  <table class="leaderboard-table">
    <thead>
      <tr>
        <th>Rank</th>
        <th>User</th>
        <th>Rating</th>
        <th>Accuracy</th>
        <th>Quizzes</th>
        <th>Last Updated</th>
      </tr>
    </thead>
    <tbody>
      {% for entry in leaderboard %}
      <tr class="leaderboard-row">
        <td>
          {% if forloop.counter0 == 0 %}
            🥇
          {% elif forloop.counter0 == 1 %}
            🥈
          {% elif forloop.counter0 == 2 %}
            🥉
          {% else %}
            {{ forloop.counter }}
          {% endif %}
        </td>
        <td class="user-cell">
  {% if entry.user.avatar %}
    <img src="{{ entry.user.avatar.url }}" alt="Avatar" class="avatar-img-leaderboard">
  {% else %}
    <span class="avatar-fallback-leaderboard">{{ entry.user.nickname|default:entry.user.username|slice:":1"|upper }}</span>
  {% endif %}
  <span class="username-text">{{ entry.user.nickname|default:entry.user.username }}</span>
</td>
        <td>{{ entry.average_rating|floatformat:2 }}</td>
        <td>{{ entry.accuracy|floatformat:2 }}%</td>
        <td>{{ entry.quizzes_taken }}</td>
        <td>{{ entry.last_updated|date:"M d, Y H:i" }}</td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="6" class="no-data">No leaderboard data yet.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table></div>
</div>
{% endblock %}
