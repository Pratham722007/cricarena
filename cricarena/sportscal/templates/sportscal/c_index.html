{% load static %}
{% load calendar_extras %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ month_name }} {{ year }} - Cricket Calendar</title>
  <link rel="stylesheet" href="{% static 'sportscal/css/c_style.css' %}" />
   <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@600&display=swap" rel="stylesheet">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 10px; }
    .day-header { font-weight: bold; text-align: center; padding: 8px 0; }
    .day { background: #181818; min-height: 70px; border-radius: 8px; padding: 6px; color: #fff; position: relative; }
    .date-number { font-size: 1.1em; font-weight: bold; color: #1db954; }
    .match { background: #1db954; color: #181818; border-radius: 5px; margin-top: 4px; padding: 2px 4px; font-size: 0.95em; }
    .calendar-nav { display: flex; justify-content: center; align-items: center; gap: 20px; margin-bottom: 10px; }
    .calendar-nav button { background: none; border: none; color: #1db954; font-size: 2rem; cursor: pointer; }
    .calendar-nav span { font-size: 1.3rem; color: #fff; }
  </style>
</head>
<body>
  <nav class="navbar">
  <div class="navbar-left">
    <div class="navbar-logo">
      <a href="/home/"><img src="/static/ipl/assets/cricarenalogo.png" alt=""> CRICARENA</a>
    </div>
  </div>

  <div class="navbar-center">
  <ul class="navbar-links">
    <li><a href="/home/">Home</a></li>
    <li><a href="/archives/">Archive</a></li>
    <li><a href="/quiz/">Quiz</a></li>
    <li><a href="/sportscal/">Calendar</a></li>
    <li><a href="/comparison/">Comparison</a></li>
    <li><a href="/tactics/">Tactics</a></li>
    <li><a href="/stadium/">Stadiums</a></li>
    <li><a href="/news/">News</a></li>

    <li class="dropdown">
      <a href="#" class="ipl-desktop-toggle">IPL ▼</a>
      <ul class="dropdown-menu">
        <li class="team-item"><a href="/ipl/?team=csk"><img src="https://documents.iplt20.com/ipl/CSK/Logos/Logooutline/CSKoutline.png" alt=""> CSK</a></li>
        <li class="team-item"><a href="/ipl/?team=mi"><img src="https://documents.iplt20.com/ipl/MI/Logos/Logooutline/MIoutline.png" alt=""> MI</a></li>
        <li class="team-item"><a href="/ipl/?team=rcb"><img src="https://documents.iplt20.com/ipl/RCB/Logos/Logooutline/RCBoutline.png" alt=""> RCB</a></li>
        <li class="team-item"><a href="/ipl/?team=kkr"><img src="https://documents.iplt20.com/ipl/KKR/Logos/Logooutline/KKRoutline.png" alt=""> KKR</a></li>
        <li class="team-item"><a href="/ipl/?team=rr"><img src="https://documents.iplt20.com/ipl/RR/Logos/Logooutline/RRoutline.png" alt=""> RR</a></li>
        <li class="team-item"><a href="/ipl/?team=dc"><img src="https://documents.iplt20.com/ipl/DC/Logos/LogoOutline/DCoutline.png" alt=""> DC</a></li>
        <li class="team-item"><a href="/ipl/?team=pbks"><img src="https://documents.iplt20.com/ipl/PBKS/Logos/Logooutline/PBKSoutline.png" alt=""> PBKS</a></li>
        <li class="team-item"><a href="/ipl/?team=srh"><img src="https://documents.iplt20.com/ipl/SRH/Logos/Logooutline/SRHoutline.png" alt=""> SRH</a></li>
        <li class="team-item"><a href="/ipl/?team=lsg"><img src="https://documents.iplt20.com/ipl/LSG/Logos/Logooutline/LSGoutline.png" alt=""> LSG</a></li>
        <li class="team-item"><a href="/ipl/?team=gt"><img src="https://documents.iplt20.com/ipl/GT/Logos/Logooutline/GToutline.png" alt=""> GT</a></li>
      </ul>
    </li>
  </ul></div>
 <div class="navbar-right">
  {% if request.user.is_authenticated %}
    <div class="profile-avatar-img" id="userAvatar" title="{{user.nickname}}">
  {% if user.avatar %}
    <img src="{{ user.avatar.url }}" alt="Avatar">
  {% else %}
    <span class="avatar-fallback">{{ user.nickname|default:user.username|slice:":1"|upper }}</span>
  {% endif %}</div>
    <div class="user-dropdown-menu" id="userDropdown">
      <ul>
        <li><a href="{% url 'profile' %}?from={{ request.get_full_path }}">My Profile</a></li>
        <li><a href="/quiz/">My Quizzes</a></li>
        <li><a href="/archives/">My Archives</a></li>
        <li><a href="/ipl/?team={{ request.user.fav_ipl_team|lower }}">My Team</a></li>
        <li>
          <form method="post" action="{% url 'logout' %}" style="display:inline;">
            {% csrf_token %}
            <button type="submit" class="logout-btn">Logout</button>
          </form>
        </li>
      </ul>
    </div>
    {% else %}
    <div class="logsign">
    <a href="/accounts/?login=1" class="login-btn">Login</a>
    <a href="/accounts/?signup=1" class="signup-btn">Sign Up</a></div>
    {% endif %}
</div>

<div class="toggle-btn">
  <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 -960 960 960" fill="#19e86c">
    <path d="M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z" />
  </svg>
</div>
</nav>
<!-- Hamburger Menu -->
<div class="hamburger">
  <!-- Top Logo and Close -->
  <div class="ham-top fade-in-section">
    <div class="navbar-logo">
      <a href="/home/">
        <img src="/static/ipl/assets/cricarenalogo.png" alt=""> CRICARENA
      </a>
    </div>
    <div class="close-btn" style="align-self: flex-end; font-size: 20px; cursor: pointer; color: #19e86c; background-color: #1b1b1b;
    border-radius: 50%; padding: 6px 13px;">✕</div>
  </div>

  <!-- Profile -->
  {% if request.user.is_authenticated %}
  <div class="ham-profile-header fade-in-section">
    <div class="ham-avatar-circle">
      {% if user.avatar %}
    <img src="{{ user.avatar.url }}" alt="Avatar">
  {% else %}
    {{ user.nickname|default:user.username|slice:":1"|upper }}
  {% endif %}
    </div>
    <div class="ham-username">{{ request.user.nickname|default:request.user.username }}</div>
    <div class="ham-profile-toggle" id="profileDropdownToggle">Profile Options<span class="dropdown-arrow-profile">▼</span></div>
  </div>

  <ul class="ham-profile-links fade-in-section" id="profileDropdown" style="display: none;">
    <li><a href="{% url 'profile' %}?from={{ request.get_full_path }}"><i class="fa fa-user"></i> My Profile</a></li>
    <li><a href="/quiz/"><i class="fa fa-brain"></i> My Quizzes</a></li>
    <li><a href="/archives/"><i class="fa fa-folder"></i> My Archives</a></li>
    <li><a href="/ipl/?team={{ request.user.fav_ipl_team|lower }}"><i class="fa fa-heart"></i> My Team</a></li>
  </ul>
  {% else %}
  <div class="logsign-container">
    <div class="logsign fade-in-section">
    <a href="/accounts/?login=1" class="login-btn">Login</a>
    <a href="/accounts/?signup=1" class="signup-btn">Sign Up</a></div></div>
  {% endif %}

  <!-- Main Nav Links -->
  <ul class="ham-nav-links">
    <li class="fade-in-section"><a href="/home/"><i class="fa fa-home"></i> Home</a></li>
    <li class="fade-in-section"><a href="/archives/"><i class="fa fa-archive"></i> Archive</a></li>
    <li class="fade-in-section"><a href="/quiz/"><i class="fa fa-question-circle"></i> Quiz</a></li>
    <li class="fade-in-section"><a href="/sportscal/"><i class="fa fa-calendar-alt"></i> Calendar</a></li>
    <li class="fade-in-section"><a href="/comparison/"><i class="fa fa-balance-scale"></i> Comparison</a></li>
    <li class="fade-in-section"><a href="/tactics/"><i class="fa fa-chess-knight"></i> Tactics</a></li>
    <li class="fade-in-section"><a href="/stadium/"><i class="fa fa-building"></i> Stadiums</a></li>
    <li class="fade-in-section"><a href="/news/"><i class="fa fa-newspaper"></i> News</a></li>
    <li class="fade-in-section"><a href="/aboutus"><i class="fa fa-info-circle"></i> About Us</a></li>

    <!-- IPL Dropdown -->
    <li class="dropdown fade-in-section">
      <div class="hamburger-ipl-toggle">
        <i class="fa-solid fa-baseball-bat-ball"></i>  IPL <span class="dropdown-arrow">▼</span>
      </div>
      <ul class="dropdown-menu">
        <li class="team-item"><a href="/ipl/?team=csk"><img src="https://documents.iplt20.com/ipl/CSK/Logos/Logooutline/CSKoutline.png" alt=""> CSK</a></li>
        <li class="team-item"><a href="/ipl/?team=mi"><img src="https://documents.iplt20.com/ipl/MI/Logos/Logooutline/MIoutline.png" alt=""> MI</a></li>
        <li class="team-item"><a href="/ipl/?team=rcb"><img src="https://documents.iplt20.com/ipl/RCB/Logos/Logooutline/RCBoutline.png" alt=""> RCB</a></li>
        <li class="team-item"><a href="/ipl/?team=kkr"><img src="https://documents.iplt20.com/ipl/KKR/Logos/Logooutline/KKRoutline.png" alt=""> KKR</a></li>
        <li class="team-item"><a href="/ipl/?team=rr"><img src="https://documents.iplt20.com/ipl/RR/Logos/Logooutline/RRoutline.png" alt=""> RR</a></li>
        <li class="team-item"><a href="/ipl/?team=dc"><img src="https://documents.iplt20.com/ipl/DC/Logos/LogoOutline/DCoutline.png" alt=""> DC</a></li>
        <li class="team-item"><a href="/ipl/?team=pbks"><img src="https://documents.iplt20.com/ipl/PBKS/Logos/Logooutline/PBKSoutline.png" alt=""> PBKS</a></li>
        <li class="team-item"><a href="/ipl/?team=srh"><img src="https://documents.iplt20.com/ipl/SRH/Logos/Logooutline/SRHoutline.png" alt=""> SRH</a></li>
        <li class="team-item"><a href="/ipl/?team=lsg"><img src="https://documents.iplt20.com/ipl/LSG/Logos/Logooutline/LSGoutline.png" alt=""> LSG</a></li>
        <li class="team-item"><a href="/ipl/?team=gt"><img src="https://documents.iplt20.com/ipl/GT/Logos/Logooutline/GToutline.png" alt=""> GT</a></li>
      </ul>
    </li>
  </ul>

  <!-- Logout bottom -->
  {% if request.user.is_authenticated %}
  <div class="ham-logout-section fade-in-section">
    <form method="post" action="{% url 'logout' %}">
      {% csrf_token %}
      <button type="submit" class="logout-btn">
        <i class="fa fa-sign-out-alt"></i> Logout
      </button>
    </form>
  </div>
  {% endif %}
</div>


  <header>
    <div class="calendar-nav">
      <button id="prevMonthBtn">&lt;</button>
      <span id="monthLabel">July 2025</span>
      <button id="nextMonthBtn">&gt;</button>
    </div>
  </header>
  <div class="calendar-grid" id="calendarGrid"></div>
  <button id="scrollToTopBtn" class="back-to-top">
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#19e86c"><path d="M412-114v-470L210-383l-96-97 366-366 366 366-96 98-202-202v470H412Z"/></svg>
        </button>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
  
    const toggleBtn = document.querySelector(".toggle-btn");
const hamburger = document.querySelector(".hamburger");
const closeBtn = document.querySelector(".close-btn");
const iplToggle = document.querySelector(".hamburger-ipl-toggle");
const iplDropdown = document.querySelector(".hamburger .dropdown-menu");
const arrow = document.querySelector(".dropdown-arrow");
const profarrow=document.querySelector(".dropdown-arrow-profile");

toggleBtn?.addEventListener("click", () => {
  hamburger?.classList.add("open");
  document.body.style.overflow = 'hidden';
});

closeBtn?.addEventListener("click", () => {
  hamburger?.classList.remove("open");
  document.body.style.overflow = 'auto';
});

iplToggle?.addEventListener("click", () => {
  iplDropdown?.classList.toggle("open");
  arrow?.classList.toggle("rotate");
});

// Profile dropdown toggle
const profileToggle = document.getElementById("profileDropdownToggle");
const profileDropdown = document.getElementById("profileDropdown");

profileToggle?.addEventListener("click", () => {
  profarrow?.classList.toggle("rotate");
  if (profileDropdown.style.display === "none") {
    profileDropdown.style.display = "flex";
  } else {
    profileDropdown.style.display = "none";
  }
});

 const scrollToTopBtn = document.getElementById("scrollToTopBtn");

  // Show/hide button on scroll
  window.addEventListener("scroll", () => {
    if (window.scrollY > 300) {
      scrollToTopBtn.style.display = "block";
    } else {
      scrollToTopBtn.style.display = "none";
    }
  });

  // Smooth scroll to top
  scrollToTopBtn.addEventListener("click", () => {
    window.scrollTo({
      top: 0,
      behavior: "smooth"
    });
  });
});
  </script>
  <script>
    // Event data for July and August
    const events = [
      { start: '2025-07-02', end: '2025-07-02', name: 'India vs England – 2nd Test' },
      { start: '2025-07-05', end: '2025-07-13', name: 'Malawi 4‑nation T20I' },
      { start: '2025-07-06', end: '2025-07-13', name: 'Indonesia Tri‑Series (T20I)' },
      { start: '2025-07-10', end: '2025-07-13', name: 'Bulgaria Tri‑Series (T20I)' },
      { start: '2025-07-10', end: '2025-07-14', name: 'India vs England – 3rd Test' },
      { start: '2025-07-14', end: '2025-07-26', name: 'Zimbabwe T20I Tri‑Series' },
      { start: '2025-07-17', end: '2025-07-27', name: 'Pearl of Africa T20I Series' },
      { start: '2025-07-18', end: '2025-07-23', name: 'Saudi Arabia vs Qatar T20Is' },
      { start: '2025-07-18', end: '2025-07-26', name: 'Asia Pacific Champions Trophy' },
      { start: '2025-07-20', end: '2025-07-24', name: 'Pakistan vs Bangladesh – T20Is' },
      { start: '2025-07-23', end: '2025-07-27', name: 'India vs England – 4th Test' },
      { start: '2025-07-25', end: '2025-07-27', name: 'Finland vs Estonia T20Is' },
      { start: '2025-07-30', end: '2025-08-11', name: 'New Zealand in Zimbabwe Tests' },
      { start: '2025-07-31', end: '2025-08-04', name: 'India vs England – 5th Test continues' },
      { start: '2025-08-01', end: '2025-08-12', name: 'Pakistan in West Indies (3 T20Is, 3 ODIs)' },
      { start: '2025-08-06', end: '2025-08-10', name: 'Pakistan women in Ireland (3 WT20Is)' },
      { start: '2025-08-07', end: '2025-08-11', name: 'NZ Tests in Zimbabwe (2 Tests)' },
      { start: '2025-08-10', end: '2025-08-24', name: 'South Africa tour of Australia (3 T20Is, 3 ODIs)' },
      { start: '2025-08-17', end: '2025-08-31', name: 'India in Bangladesh (3 ODIs, 3 T20Is; see note on possible postponement)' },
      { start: '2025-08-29', end: '2025-08-31', name: 'Sri Lanka in Zimbabwe (2 ODIs)' },
      { start: '2025-09-03', end: '2025-09-07', name: 'Sri Lanka/Zimbabwe T20Is continue' },
    ];
    const months = [
      { name: 'July 2025', year: 2025, month: 7, days: 31 },
      { name: 'August 2025', year: 2025, month: 8, days: 31 },
    ];
    let currentMonthIdx = 0;
    function getEventsForDay(year, month, day) {
      const dateStr = `${year}-${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
      return events.filter(ev => dateStr >= ev.start && dateStr <= ev.end).map(ev => ev.name);
    }
    function renderCalendar() {
      const grid = document.getElementById('calendarGrid');
      const label = document.getElementById('monthLabel');
      const { name, year, month, days } = months[currentMonthIdx];
      label.textContent = name;
      // Clear grid
      grid.innerHTML = '';
      // Day headers
      ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'].forEach(h => {
        const dh = document.createElement('div');
        dh.className = 'day-header';
        dh.textContent = h;
        grid.appendChild(dh);
      });
      // First day of month
      const firstDay = new Date(year, month-1, 1).getDay();
      for(let i=0;i<firstDay;i++) {
        const empty = document.createElement('div');
        empty.className = 'day';
        grid.appendChild(empty);
      }
      // Days
      for(let d=1;d<=days;d++) {
        const dayBox = document.createElement('div');
        dayBox.className = 'day';
        const num = document.createElement('div');
        num.className = 'date-number';
        num.textContent = d;
        dayBox.appendChild(num);
        const evs = getEventsForDay(year, month, d);
        if(evs.length) {
          evs.forEach((ev, idx) => {
            const m = document.createElement('div');
            m.className = 'match';
            if(idx === 0) {
              const dateLabel = document.createElement('div');
              dateLabel.textContent = `${name.split(' ')[0].slice(0,3)} ${d}`;
              dateLabel.style.fontSize = '0.85em';
              dateLabel.style.fontWeight = 'bold';
              dateLabel.style.color = '#222';
              dateLabel.style.marginBottom = '2px';
              m.appendChild(dateLabel);
            }
            m.appendChild(document.createTextNode(ev));
            dayBox.appendChild(m);
          });
        }
        grid.appendChild(dayBox);
      }
      // Fill out last week
      const total = firstDay + days;
      const rem = (7 - (total % 7)) % 7;
      for(let i=0;i<rem;i++) {
        const empty = document.createElement('div');
        empty.className = 'day';
        grid.appendChild(empty);
      }
    }
    document.getElementById('prevMonthBtn').onclick = () => {
      if(currentMonthIdx > 0) { currentMonthIdx--; renderCalendar(); }
    };
    document.getElementById('nextMonthBtn').onclick = () => {
      if(currentMonthIdx < months.length-1) { currentMonthIdx++; renderCalendar(); }
    };
    renderCalendar();
  </script>
</body>
</html>


