{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Blog Page</title>
  {% comment %} <link rel="stylesheet" href="styles.css"> {% endcomment %}
  <link rel="stylesheet" href="{% static 'styles.css' %}">

  <script>
  function getCookie(name) {
    let cookieValue = null;
    if (document.cookie && document.cookie !== '') {
      const cookies = document.cookie.split(';');
      for (let i = 0; i < cookies.length; i++) {
        const cookie = cookies[i].trim();
        // Does this cookie string begin with the name we want?
        if (cookie.substring(0, name.length + 1) === (name + '=')) {
          cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
          break;
        }
      }
    }
    return cookieValue;
  }
  const csrftoken = getCookie('csrftoken');
</script>

</head>
<body>

      {% include 'quiz/navbar.html' %}
  
<div class="main-container">
  <div class="container">
    <h1>Review Blog</h1>
    <div class="post-form">
      <textarea id="postContent" placeholder="Write your review..."></textarea>
      <button onclick="submitPost()">Post</button>
    </div>
  </div>

    <div class="post-list" id="postList">
      <!-- Posts will be added here -->
       {% for post in posts %}
    <div class="post">
        {% comment %} <strong>{{ post.author_name }}</strong>
        <strong>{{ post.team_name }}</strong> {% endcomment %}
        <span class="author-name">{{ post.author_name }}</span>
        {% if post.is_verified %}
            <span class="verified">âœ“</span>
        {% endif %}
        <span class="team-name">( {{ post.team_name }} )</span>
        <br>
        <p>{{ post.content }}</p>
        {% comment %} <br> {% endcomment %}
        <small>{{ post.created_at }}</small>
    </div>
{% endfor %}

  <script>
  document.cookie = "csrftoken={{ csrf_token }}";
  </script>

  {% comment %} <script>
    const team_name = "{{ team_name|escapejs }}"; // now accessible in script.js
</script> {% endcomment %}

<script>
  const team_name = "{{ team_name|escapejs }}";
</script>



  <script src="{% static 'script.js' %}"></script>
  {% comment %} <script src="script.js"></script> {% endcomment %}
</body>
</html>
